---
layout: default
title: mongodb learning.
excerpt: mongodb learning.
tags: [mongo, c++, python]
---



<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">mongo</h2>
<div class="outline-text-2" id="text-1">

<p><a href="https://github.com/mongodb/mongo">https://github.com/mongodb/mongo</a>  
</p>
</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">安装</h3>
<div class="outline-text-3" id="text-1-1">

<p>组件：
</p>
<p>
  bin/mongod - 数据库服务程序
  bin/mongos - 数据共享控制器
  bin/mongo  - 数据库脚本解释器 (使用交互式 javascript)
</p>
<p>
工具箱
</p>
<p>
  bin/mongodump         - MongoDB 备份维护工具 - for 备份, 快照, 等..
  bin/mongorestore      - MongoDB 恢复备份
  bin/mongoexport       - 导出单个集合  (JSON, CSV格式)
  bin/mongoimport       - 从JSON or CSV格式导入
  bin/mongofiles        - MongoDB GridFS压入到处工具              
  bin/mongostat         - 性能显示
</p></div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">使用数据库基本操作</h3>
<div class="outline-text-3" id="text-1-2">


</div>

<div id="outline-container-1-2-1" class="outline-4">
<h4 id="sec-1-2-1">使用mongo shell交互环境</h4>
<div class="outline-text-4" id="text-1-2-1">


</div>

<div id="outline-container-1-2-1-1" class="outline-5">
<h5 id="sec-1-2-1-1">开始mongod服务进程</h5>
<div class="outline-text-5" id="text-1-2-1-1">

<p>   mongod -help查看开启服务方式 
</p></div>

</div>

<div id="outline-container-1-2-1-2" class="outline-5">
<h5 id="sec-1-2-1-2">使用mongo shell链接数据库</h5>
<div class="outline-text-5" id="text-1-2-1-2">

<p>   mongo [&ndash;host &lt;ip&gt;】  [-port &lt;ipport&gt;]
   默认, mongo 数据库服务到监听端口是 27017,地址是“localhost”.
   eg.mongo &ndash;host 127.0.0.1 &ndash;port 27017
</p></div>

</div>

<div id="outline-container-1-2-1-3" class="outline-5">
<h5 id="sec-1-2-1-3">选择连接数据库</h5>
<div class="outline-text-5" id="text-1-2-1-3">


<p>
默认在使用mongo shell连接数据库会使用名为“test”的数据库实例. 在任何情况下，可以输入“db”命令来显示当前使用的数据库实例名:
如：
&gt; db
test
其它常用命令：
</p><ol>
<li>显示所有数据库实例列表:
</li>
</ol>

<p>show dbs
</p><ol>
<li>切换数据库实例:
</li>
</ol>

<p>use mydb
现在,如果输入“show dbs” 命令, 结果并不会包含 “mydb“数据库.因为 MongoDB只有当你往数据库中插入数据时才会创建新的实例。
</p><ol>
<li>命令帮助：
</li>
</ol>

<p>help
该命令还不仅如此，还可以在js方法或db和collection对象的后面跟上“.help()”,来获取额外到帮助信息。
</p></div>

</div>

<div id="outline-container-1-2-1-4" class="outline-5">
<h5 id="sec-1-2-1-4">创建集合和插入文档</h5>
<div class="outline-text-5" id="text-1-2-1-4">

<p>本节将会在一个新的名为“mydb”到数据实例中插入一个文档数据到一个名为“testData”到集合中。
</p>
<p>
MongoDB will create a collection implicitly upon its first use. You do not need to create a collection before inserting
data. Furthermore, because MongoDB uses dynamic schemas (page 556), you also need not specify the structure of
your documents before inserting them into the collection.
</p><ol>
<li>From the mongo shell, confirm you are in the mydb database by issuing the following:
</li>
</ol>

<p>db
</p><ol>
<li>If mongo does not return mydb for the previous operation, set the context to the mydb database, with the
</li>
</ol>

<p>following operation:
use mydb
</p><ol>
<li>Create two documents named j and k by using the following sequence of JavaScript operations:
</li>
</ol>

<p>j = { name : "mongo" }
k = { x : 3 }
</p><ol>
<li>Insert the j and k documents into the testData collection with the following sequence of operations:
</li>
</ol>

<p>db.testData.insert( j )
db.testData.insert( k )
When you insert the first document, the mongod will create both the mydb database and the testData
collection.
</p></div>

</div>

<div id="outline-container-1-2-1-5" class="outline-5">
<h5 id="sec-1-2-1-5">插入测试数据</h5>
<div class="outline-text-5" id="text-1-2-1-5">

<ul>
<li id="sec-1-2-1-5-1">循环插入<br/>
for (var i = 1; i &lt;= 25; i++) db.testData.insert( { x : i } )
</li>
</ul>
<ul>
<li id="sec-1-2-1-5-2">插入函数<br/>
function insertData(dbName, colName, num) {
var col = db.getSiblingDB(dbName).getCollection(colName);
for (i = 0; i &lt; num; i++) {
col.insert({x:i});
}
print(col.count());
}
</li>
</ul>
</div>

</div>

<div id="outline-container-1-2-1-6" class="outline-5">
<h5 id="sec-1-2-1-6">集合的遍历</h5>
<div class="outline-text-5" id="text-1-2-1-6">

<p>var c = db.testData.find()
while ( c.hasNext() ) printjson( c.next() )
</p></div>

</div>

<div id="outline-container-1-2-1-7" class="outline-5">
<h5 id="sec-1-2-1-7">对象的查询和条件查询</h5>
<div class="outline-text-5" id="text-1-2-1-7">

<p>db.testData.find( { x : 18 } )
db.testData.findOne( { x : 18 } )
</p></div>
</div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">mongo CRUD</h2>
<div class="outline-text-2" id="text-2">



</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">CPP for mongo</h3>
<div class="outline-text-3" id="text-2-1">

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">java script</h3>
<div class="outline-text-3" id="text-2-2">

</div>
</div>
</div>
